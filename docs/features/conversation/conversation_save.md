# 对话保存与载入

在与 AI 进行深度讨论时，一段精彩的对话可能包含了您的思考过程、重要的分析结论、甚至是几经修改才满意的文案。如果因为不小心关闭浏览器或清除缓存而丢失这些内容，无疑是令人沮丧的。GPT Academic 提供了完善的对话持久化机制，不仅能在浏览器中自动保存最近的对话记录，还支持将对话导出为多种格式的文件，方便您归档、分享或在其他设备上继续工作。

---

## 功能概览

GPT Academic 采用双重保存机制来保护您的对话数据。第一重是**浏览器本地存储**，系统会自动将最近的对话保存在浏览器的 LocalStorage 中，即使刷新页面也能快速恢复；第二重是**文件导出**，您可以手动将对话保存为 HTML、Word、PDF、Markdown 等多种格式的文件，实现长期归档或跨设备迁移。

这两种机制相辅相成：本地存储提供了便捷的即时恢复能力，文件导出则提供了可靠的长期存档方案。接下来我们将分别介绍这两种功能的使用方法。

---

## 浏览器本地存储

浏览器本地存储是一个全自动的功能，无需您进行任何操作。当您与 AI 进行对话时，系统会在后台自动将对话内容保存到浏览器的 LocalStorage 中。

### 对话时间线

在界面左侧的「对话时间线」区域，您可以看到最近保存的对话记录。每条记录都显示了对话的时间戳和内容预览，点击任意一条记录即可立即恢复该对话的完整内容。

<!-- IMAGE: feat_conv_01_conversation_timeline.png -->
<!-- 描述: 界面左侧的对话时间线，展示多条历史对话记录 -->
<!-- 标注: ① 对话时间线区域 ② 每条对话的时间和预览信息 ③ 点击后对话内容恢复到主对话区 -->
<!-- 尺寸建议: 800px -->
![对话时间线](../../images/feat_conv_01_conversation_timeline.png)

### 自动保存规则

系统会在以下时机自动保存对话：

- 每轮对话结束后（AI 回复完成时）
- 点击「新对话」按钮开启新对话时
- 关闭浏览器标签页前

本地存储最多保留 **10 条**最近的对话记录。当记录数达到上限时，系统会自动移除最早的对话，并在界面右下角弹出提示。如果某段对话对您特别重要，建议使用文件导出功能进行长期保存。

!!! warning "LocalStorage 的局限性"
    浏览器本地存储依赖于当前浏览器环境，清除浏览器缓存或切换浏览器/设备都会导致无法访问这些记录。对于重要对话，请务必使用文件导出功能进行备份。

---

## 文件导出

对于需要长期保存或分享的对话，GPT Academic 提供了强大的文件导出功能。通过「保存当前的对话」插件，您可以将对话一键导出为多种格式。

### 导出步骤

在界面上方的函数插件区找到**对话**分类，点击**保存当前的对话**按钮。系统会弹出一个配置面板，您可以在此输入自定义的文件名（留空则使用当前时间戳作为文件名）。确认后，系统会并发生成多种格式的文件，完成后自动添加到下载区供您获取。

### 支持的导出格式

导出功能会同时生成以下格式的文件：

| 格式 | 扩展名 | 特点 | 适用场景 |
|-----|-------|------|---------|
| HTML | `.html` | 保留完整样式，可直接在浏览器中打开查看 | 长期存档、载入恢复 |
| Word | `.docx` | 兼容 Microsoft Word 和 WPS | 编辑修改、正式文档 |
| PDF | `.pdf` | 固定排版，适合打印和分发 | 打印、分享、归档 |
| Markdown | `.md` | 纯文本格式，便于版本控制和二次处理 | 技术文档、博客发布 |
| 纯文本 | `.txt` | 最简单的文本格式，无格式干扰 | 快速查阅、文本处理 |
| Excel | `.xlsx` | 当对话中包含表格数据时自动提取 | 数据分析、表格处理 |

!!! tip "表格数据提取"
    如果您在对话中让 AI 帮您整理了表格形式的数据，系统会自动识别并提取这些表格内容，单独保存为 Excel 文件。这个功能对于数据整理工作特别实用——您可以先让 AI 帮您把杂乱的数据整理成表格，再一键导出为可编辑的 Excel 文件。

### 自定义文件名

点击「保存当前的对话」按钮后，配置面板中提供了文件名输入框。您可以输入一个有意义的名称（如「论文润色讨论」、「项目需求分析」），便于日后查找。如果留空，系统会使用 `聊天记录_年-月-日-时-分-秒` 的格式自动命名。

### 导出文件位置

导出的文件会保存在 `gptac_log/{用户名}/chat_history/` 目录下，同时会出现在界面右侧的下载区。您可以直接从下载区点击文件名进行下载，也可以在服务器上直接访问这些文件。

---

## 载入对话

当您需要恢复之前导出的对话时，可以使用「载入对话历史存档」功能。这个功能目前**仅支持 HTML 格式**的存档文件，因此建议您在导出时保留 HTML 文件作为主要的备份格式。

### 载入步骤

载入操作有两种方式。第一种方式是直接将 HTML 文件上传到系统，然后在函数插件区的**对话**分类中点击**载入对话历史存档（先上传存档或输入路径）**插件；第二种方式是在输入框中粘贴文件的完整路径，然后点击该插件。

如果您没有提供任何文件或路径，系统会自动列出本地已保存的所有对话存档，并显示每个文件的预览内容。您可以从列表中选择一个文件路径，粘贴到输入框后重新点击插件即可载入。

### 载入后的状态

成功载入后，系统会在对话区显示「载入对话 X 条，上下文 Y 条」的提示，表明对话内容已完整恢复。此时您可以继续之前的讨论，AI 能够理解之前的对话上下文。

---

## 管理对话记录

随着时间推移，您可能积累了大量的对话存档。GPT Academic 提供了清理功能来帮助您管理这些记录。

### 清理浏览器本地记录

在对话时间线的每条记录上，将鼠标悬停后会出现删除按钮，点击即可删除单条记录。您也可以通过清除浏览器缓存来一次性清除所有本地记录，但这会影响其他网站的数据。

### 删除服务器存档文件

如果您想批量删除服务器上保存的所有对话存档，可以使用**删除所有本地对话历史记录（谨慎操作）**插件。这个操作会删除当前用户在 `chat_history` 目录下的所有 HTML 存档文件，且**无法恢复**。

!!! danger "谨慎操作"
    删除操作是不可逆的。在执行批量删除前，请确认您不再需要这些对话记录，或已经通过其他方式备份了重要内容。

---

## 常见问题

???+ question "刷新页面后对话消失了怎么办？"
    首先检查左侧的对话时间线是否有您的对话记录。如果有，点击即可恢复。如果时间线也是空的，可能是以下原因：
    
    - 对话还没有被保存（新开始的对话在第一轮回复完成前不会保存）
    - 浏览器设置禁用了 LocalStorage
    - 清除了浏览器缓存
    
    为防止数据丢失，建议在重要对话进行过程中使用「保存当前的对话」功能手动备份。

???+ question "为什么载入功能只支持 HTML 格式？"
    HTML 格式能够完整保留对话的结构信息，包括问答配对关系和上下文历史。其他格式（如 Word、PDF）虽然便于阅读，但在格式转换过程中可能丢失某些元数据，因此无法可靠地解析回原始结构。
    
    如果您希望在其他设备上继续对话，请确保保留 HTML 格式的存档文件。

???+ question "导出的 PDF 格式异常或生成失败"
    PDF 生成依赖于将 Word 文件转换为 PDF 的功能，在某些环境下可能不可用。如果 PDF 生成失败，您仍可以使用其他格式（如 HTML、Word）的文件。在 Windows 环境下安装 Microsoft Office 或 LibreOffice 可以提升 PDF 转换的成功率。

???+ question "表格数据没有被提取为 Excel"
    表格提取功能会尝试识别对话中的 Markdown 格式表格。如果您的表格使用了非标准格式，可能无法被正确识别。您可以要求 AI「请将数据整理为 Markdown 表格格式」，然后重新保存对话，通常就能正确提取了。

???+ question "不同用户的对话记录是否隔离？"
    是的。如果您配置了多用户模式（通过登录或 Cookie 区分用户），每个用户的对话存档会保存在独立的目录下，互不影响。浏览器本地存储也是基于当前浏览器的，不同用户使用不同浏览器时数据自然隔离。

---

## 相关文档

- [基础操作](../basic_operations.md) — 了解 GPT Academic 的界面布局和基础使用
- [配置详解](../../get_started/configuration.md) — 了解用户和存储相关的配置选项
- [虚空终端](../agents/void_terminal.md) — 用自然语言调用各种功能，包括对话保存
- [联网搜索](internet_search.md) — 获取实时信息的对话增强功能



