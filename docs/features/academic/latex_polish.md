# LaTeX 项目处理

对于使用 LaTeX 撰写学术论文的研究者来说，语言润色和语法纠错是投稿前不可或缺的环节。GPT Academic 提供了一套完整的 LaTeX 项目处理工具，能够在保留原有格式和命令的前提下，对论文全文进行智能润色或纠错，大幅提升写作效率。

---

## 功能概述

GPT Academic 针对 LaTeX 项目提供两类处理功能：**基础处理**和**高级处理**。基础处理无需任何额外环境，上传项目即可使用；高级处理需要安装 LaTeX 编译环境，但能生成直观的 PDF 对比文档。

| 功能类型 | 功能名称 | 环境要求 | 输出形式 |
|---------|---------|---------|---------|
| 基础处理 | 英文 LaTeX 项目全文润色 | 无 | 润色后的 .tex 文件 |
| 基础处理 | 中文 LaTeX 项目全文润色 | 无 | 润色后的 .tex 文件 |
| 高级处理 | LaTeX 英文纠错+高亮修正位置 | LaTeX 环境 | 高亮修改处的 PDF |
| 高级处理 | Arxiv/本地论文精细翻译 | LaTeX 环境 | 中文 PDF + 对照 PDF |

无论选择哪种处理方式，系统都会自动识别并保护 LaTeX 命令（如 `\section`、`\cite`、`\begin` 和数学公式），确保编译不会出错。

---

## 基础润色功能

基础润色功能适合需要快速改进论文语言质量的场景。系统会对整个项目的所有 `.tex` 文件进行处理，改进语法、提升清晰度和可读性，同时严格保留原有的 LaTeX 结构。

### 准备工作

使用前，请将您的 LaTeX 项目打包成 ZIP 压缩文件，确保压缩包内包含完整的项目结构。如果您的项目存放在本地，也可以直接使用文件夹路径。

### 操作步骤

首先，将 LaTeX 项目压缩包上传到 GPT Academic。上传完成后，在函数插件区的**学术**分类中，根据论文语言选择对应的润色插件：英文论文选择**英文 Latex 项目全文润色**，中文论文则选择**中文 Latex 项目全文润色**。点击插件按钮后，系统将自动开始处理。

处理过程中，界面会实时显示每个文件片段的润色进度。由于采用多线程并行处理，整体速度相当可观——一篇 20 页的论文通常只需几分钟即可完成。处理结束后，润色后的 `.tex` 文件会打包成 ZIP 压缩包，出现在右侧的文件下载区。

!!! tip "处理策略"
    系统会自动将超长的 LaTeX 文件按 token 数进行切分，每个片段独立处理后再合并。这种策略既能保证处理质量，又能充分利用 API 的并发能力。

### 润色效果说明

润色模式会在保持原意的基础上优化语言表达，具体改进包括：

- 修正语法错误和拼写问题
- 改善句子结构，使表达更加流畅
- 提升学术写作的规范性和专业性
- 统一术语使用和行文风格

系统在润色时会跳过 LaTeX 注释（以 `%` 开头的行），处理结果会生成新的 `.polish.tex` 文件，原始文件保持不变。

---

## 高级处理功能

高级处理功能需要本地安装 LaTeX 编译环境，但能提供更直观的处理结果——生成带有修改高亮的 PDF 文档，或将英文论文翻译成中文并重新编译。

### 环境配置

高级功能依赖 `pdflatex` 命令，您需要先安装 TeX Live 或 MiKTeX 发行版：

=== "Windows"

    推荐安装 [TeX Live](https://tug.org/texlive/)，安装时选择完整版以获得最佳兼容性。安装完成后，确保 `pdflatex` 命令可在命令行中执行。

=== "macOS"

    推荐安装 [MacTeX](https://tug.org/mactex/)，这是 TeX Live 的 macOS 版本。安装后重启终端即可使用。

=== "Linux / Docker"

    ```bash
    # Ubuntu/Debian
    sudo apt-get install texlive-full
    
    # 如果使用 Docker 部署 GPT Academic
    # 官方 Docker 镜像已内置 LaTeX 环境，无需额外配置
    ```

安装完成后，可以在终端运行 `pdflatex -version` 验证是否安装成功。

### 纠错并高亮修正位置

**LaTeX 英文纠错+高亮修正位置** 插件会对英文论文进行语法纠错，并生成两份 PDF 文档进行对比：原始版本和修正版本，修正处会以高亮方式标注。

使用方法与基础润色类似：上传 LaTeX 项目压缩包，然后在函数插件区选择 **LaTeX英文纠错+高亮修正位置 [需Latex]**。如果您需要添加特定的纠错指令，可以在高级参数区输入，例如：

```
If the term "LLM" appears, keep it as is without expanding.
```

处理完成后，下载区会出现包含以下文件的压缩包：

- `merge.pdf` — 原始论文 PDF
- `merge_proofread_en.pdf` — 纠错后的论文 PDF，修改处有高亮标注
- 所有处理后的 `.tex` 源文件

### 论文翻译功能

翻译功能可以将英文论文翻译成中文，并重新编译为排版精美的 PDF。GPT Academic 提供两种入口：

**Arxiv 论文翻译**：直接输入 Arxiv 论文 ID（如 `2301.00234`）或完整 URL，系统会自动下载论文源码并翻译。这个功能在 [Arxiv 论文翻译](arxiv_translation.md) 文档中有详细介绍。

**本地论文翻译**：上传本地的 LaTeX 项目压缩包，选择 **📚本地Latex论文精细翻译** 插件进行处理。

翻译完成后，您将获得：

- `merge_translate_zh.pdf` — 翻译后的中文 PDF
- `comparison.pdf` — 中英对照 PDF（如果生成成功）
- 完整的翻译后 LaTeX 源文件

!!! info "翻译质量提示"
    翻译效果与所选模型密切相关。对于学术论文翻译，推荐使用 `gpt-4o` 或 `qwen-max` 等高性能模型，以获得更准确的专业术语翻译。

---

## 处理原理

了解处理原理有助于您更好地使用这些功能。GPT Academic 的 LaTeX 处理遵循以下流程：

**第一步：项目解析**。系统递归扫描项目文件夹，收集所有 `.tex` 文件。随后对每个文件进行预处理，移除 LaTeX 注释（以 `%` 开头的非命令行），保留纯净的正文内容。

**第二步：智能切分**。由于语言模型存在 token 限制，系统会将长文件按照约 1024 tokens 的粒度切分成多个片段。切分时会尽量保持段落完整性，避免在句子中间断开。

**第三步：并行处理**。所有片段会被分配给多个工作线程，并行调用 AI 模型进行处理。默认的并发数由 `DEFAULT_WORKER_NUM` 配置项控制，绑定信用卡的 OpenAI 用户可以将其设置为 16 或更高以加快处理速度。

**第四步：结果合并**。各片段处理完成后，系统按原始顺序合并结果，生成完整的输出文件。对于高级功能，还会调用 `pdflatex` 编译生成 PDF 文档。

---

## 常见问题

??? question "润色后的文件编译报错怎么办？"
    这种情况通常是因为 AI 在处理过程中意外修改了某些 LaTeX 命令。您可以对比原始文件和润色后的文件，定位问题位置进行手动修复。使用更高性能的模型（如 GPT-4o）可以显著降低此类问题的发生概率。

??? question "高级功能提示找不到 pdflatex 怎么办？"
    请确认 LaTeX 环境已正确安装，并且 `pdflatex` 命令在系统 PATH 中。您可以在终端运行 `pdflatex -version` 进行验证。如果使用 Docker 部署，请确保使用的是官方镜像，其中已内置 LaTeX 环境。

??? question "处理速度很慢，如何加快？"
    处理速度主要取决于两个因素：模型响应速度和并发数。您可以在配置文件中增大 `DEFAULT_WORKER_NUM` 的值来提高并发数。此外，使用 `gpt-3.5-turbo` 等响应较快的模型也能显著缩短处理时间，但可能在处理复杂学术文本时效果稍逊。

??? question "如何保留特定术语不被修改？"
    在使用插件时，可以在高级参数区输入指令。例如，如果您希望保留 "Transformer" 这个术语不被翻译或修改，可以输入：
    ```
    If the term "Transformer" appears, keep it as is.
    ```

---

## 相关文档

- [Arxiv 论文翻译](arxiv_translation.md) — 一键翻译 Arxiv 论文
- [PDF 论文翻译](pdf_translation.md) — 翻译本地 PDF 文档
- [配置详解](../../get_started/configuration.md) — 了解更多配置选项


